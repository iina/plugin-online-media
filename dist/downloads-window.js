(()=>{function e(e){return e&&e.__esModule?e.default:e}var t={};function n(e){return decodeURIComponent(escape(window.atob(e)))}t=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return t(e)?"array":typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function a(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var s=RegExp.prototype.test;function c(e,t){return s.call(e,t)}var l=/\S/;function p(e){return!c(l,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function h(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return u[e]}))}var f=/\s*/,d=/\s+/,v=/\s*=/,g=/\s*\}/,w=/#|\^|\/|>|\{|&|=|!/;function y(e,n){if(!e)return[];var r,o,a,s=!1,c=[],l=[],u=[],h=!1,y=!1,k="",_=0;function x(){if(h&&!y)for(;u.length;)delete l[u.pop()];else u=[];h=!1,y=!1}function U(e){if("string"==typeof e&&(e=e.split(d,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(i(e[0])+"\\s*"),o=new RegExp("\\s*"+i(e[1])),a=new RegExp("\\s*"+i("}"+e[1]))}U(n||E.tags);for(var T,j,I,F,M,P,S=new C(e);!S.eos();){if(T=S.pos,I=S.scanUntil(r))for(var O=0,R=I.length;O<R;++O)p(F=I.charAt(O))?(u.push(l.length),k+=F):(y=!0,s=!0,k+=" "),l.push(["text",F,T,T+1]),T+=1,"\n"===F&&(x(),k="",_=0,s=!1);if(!S.scan(r))break;if(h=!0,j=S.scan(w)||"name",S.scan(f),"="===j?(I=S.scanUntil(v),S.scan(v),S.scanUntil(o)):"{"===j?(I=S.scanUntil(a),S.scan(g),S.scanUntil(o),j="&"):I=S.scanUntil(o),!S.scan(o))throw new Error("Unclosed tag at "+S.pos);if(M=">"==j?[j,I,T,S.pos,k,_,s]:[j,I,T,S.pos],_++,l.push(M),"#"===j||"^"===j)c.push(M);else if("/"===j){if(!(P=c.pop()))throw new Error('Unopened section "'+I+'" at '+T);if(P[1]!==I)throw new Error('Unclosed section "'+P[1]+'" at '+T)}else"name"===j||"{"===j||"&"===j?y=!0:"="===j&&U(I)}if(x(),P=c.pop())throw new Error('Unclosed section "'+P[1]+'" at '+S.pos);return b(m(l))}function m(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}function b(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}function C(e){this.string=e,this.tail=e,this.pos=0}function k(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function _(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}C.prototype.eos=function(){return""===this.tail},C.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},C.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},k.prototype.push=function(e){return new k(e,this)},k.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var i,s,c,l=this,p=!1;l;){if(e.indexOf(".")>0)for(i=l.view,s=e.split("."),c=0;null!=i&&c<s.length;)c===s.length-1&&(p=o(i,s[c])||a(i,s[c])),i=i[s[c++]];else i=l.view[e],p=o(l.view,e);if(p){t=i;break}l=l.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},_.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},_.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||E.tags).join(":"),i=void 0!==n,o=i?n.get(r):void 0;return null==o&&(o=y(e,t),i&&n.set(r,o)),o},_.prototype.render=function(e,t,n,r){var i=this.getConfigTags(r),o=this.parse(e,i),a=t instanceof k?t:new k(t,void 0);return this.renderTokens(o,a,n,e,r)},_.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,c="",l=0,p=e.length;l<p;++l)s=void 0,"#"===(a=(o=e[l])[0])?s=this.renderSection(o,t,n,r,i):"^"===a?s=this.renderInverted(o,t,n,r,i):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t,i):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},_.prototype.renderSection=function(e,r,i,o,a){var s=this,c="",l=r.lookup(e[1]);function p(e){return s.render(e,r,i,a)}if(l){if(t(l))for(var u=0,h=l.length;u<h;++u)c+=this.renderTokens(e[4],r.push(l[u]),i,o,a);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],r.push(l),i,o,a);else if(n(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(r.view,o.slice(e[3],e[5]),p))&&(c+=l)}else c+=this.renderTokens(e[4],r,i,o,a);return c}},_.prototype.renderInverted=function(e,n,r,i,o){var a=n.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],n,r,i,o)},_.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},_.prototype.renderPartial=function(e,t,r,i){if(r){var o=this.getConfigTags(i),a=n(r)?r(e[1]):r[e[1]];if(null!=a){var s=e[6],c=e[5],l=e[4],p=a;0==c&&l&&(p=this.indentPartial(a,l,s));var u=this.parse(p,o);return this.renderTokens(u,t,r,p,i)}}},_.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},_.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||E.escape,i=t.lookup(e[1]);if(null!=i)return"number"==typeof i&&r===E.escape?String(i):r(i)},_.prototype.rawValue=function(e){return e[1]},_.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},_.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var E={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){x.templateCache=e},get templateCache(){return x.templateCache}},x=new _;return E.clearCache=function(){return x.clearCache()},E.parse=function(e,t){return x.parse(e,t)},E.render=function(e,t,n,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+r(e)+'" was given as the first argument for mustache#render(template, view, partials)');return x.render(e,t,n,i)},E.escape=h,E.Scanner=C,E.Context=k,E.Writer=_,E}(),document.addEventListener("DOMContentLoaded",(function(){iina.postMessage("requestUpdate",{force:!0});let i=null;iina.onMessage("update",(function(n){console.log("update",n),n.active?i=setInterval((()=>{iina.postMessage("requestUpdate",{force:!1})}),1e3):clearInterval(i),n.data.forEach((e=>{var t;e[`is_${e.status}`]=!0,e.dest_base64=(t=e.dest,window.btoa(unescape(encodeURIComponent(t))))})),document.getElementById("content").innerHTML=e(t).render(r,n)})),window.openFile=function(e){iina.postMessage("openFile",{file:n(e)})},window.revealFile=function(e){iina.postMessage("revealFile",{file:n(e)})}}));const r='\n<div class="downloads-window">\n{{#data}}\n<div class="download-item">\n<div class="filename">{{filename}}</div>\n<div class="progress">\n<div class="left">\n{{#is_pending}}\nPending\n{{/is_pending}}\n{{#is_downloading}}\n{{dl}}/{{total}} (ETA {{eta}})\n{{/is_downloading}}\n{{#is_done}}\nDone\n{{/is_done}}\n{{#is_error}}\nError: {{error}}\n{{/is_error}}\n</div>\n<div class="right">\n{{#is_done}}\n<a href="#" onclick="openFile(\'{{dest_base64}}\')">Open</a>\n<a href="#" onclick="revealFile(\'{{dest_base64}}\')">Reveal in Finder</a>\n{{/is_done}}\n</div>\n</div>\n</div>\n{{/data}}\n{{^data}}\n<center>No downloads</center>\n{{/data}}\n</div>\n'})();
//# sourceMappingURL=downloads-window.js.map
